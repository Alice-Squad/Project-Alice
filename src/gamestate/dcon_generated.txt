include{<array>}
include{"constants.hpp"}
include{"modifiers.hpp"}
include{"date_interface.hpp"}

make_index{text_key}{uint32_t}
make_index{text_sequence_id}{uint16_t}
make_index{texture_id}{uint16_t}
make_index{gfx_object_id}{uint16_t}
make_index{gui_def_id}{uint16_t}
make_index{government_type_id}{uint8_t}
make_index{crime_id}{uint8_t}
make_index{unit_type_id}{uint8_t}
make_index{unit_name_id}{uint16_t}

object{
	name{ national_identity }
	storage_type{contiguous}
	size{ 1000 }

	property{
		name{ color }
		type{ uint32_t }
	}
	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ adjective }
		type{ text_sequence_id }
	}

	property{
		name{ unit_names_first }
		type{array{unit_type_id}{unit_name_id}}
	}
	property{
		name{ unit_names_count }
		type{array{unit_type_id}{uint8_t}}
	}

	property{
		name{ political_party_first }
		type{ political_party_id }
	}
	property{
		name{ political_party_count }
		type{ uint8_t }
	}
}

object {
	name{ political_party }
	storage_type{contiguous}
	size{ 6000 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ start_date }
		type{ sys::date }
	}
	property{
		name{ end_date }
		type{ sys::date }
	}
	property{
		name{ ideology }
		type{ ideology_id }
	}
	property{
		name{ party_issues }
		type{array{issue_id}{uint8_t}}
	}
}

object{
	name{ religion }
	storage_type{ contiguous }
	size{ 126 }
	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ color }
		type{ uint32_t }
	}
	property{
		name{ icon }
		type{ uint8_t }
	}
	property{
		name{ is_pagan }
		type{ bitfield }
	}
}

object {
	name{ culture_group }
	storage_type{ contiguous }
	size{ 126 }

	property{
		name{ name }
		type{ text_sequence_id }
	}

	property{
		name{ is_overseas }
		type{ bitfield }
	}

	property{
		name{ leader }
		type{ uint8_t }
	}
}

object {
	name{ culture }
	storage_type{ contiguous }
	size{ 500 }

	property{
		name{ name }
		type{ text_sequence_id }
	}

	property{
		name{ color }
		type{ uint32_t }
	}
	property{
		name{ radicalism }
		type{ int8_t }
	}

	property{
		name{ first_names }
		type{vector_pool{10000}{text_key}}
	}
	property{
		name{ last_names }
		type{vector_pool{10000}{text_key}}
	}
}

relationship{
	name{culture_group_membership}
	
	link{
		object{culture}
		name{member}
		type{unique}
	}
	link{
		object{culture_group}
		name{group}
		type{many}
		index_storage{array}
	}
}

relationship{
	name{ cultural_union_of }
	
	link{
		object{national_identity}
		name{identity}
		type{unique}
	}
	link{
		object{culture_group}
		name{culture_group}
		type{unique}
	}
}

object {
	name{ commodity }
	storage_type{ contiguous }
	size{ 126 }

	property{
		name{ name }
		type{ text_sequence_id }
	}

	property{
		name{ color }
		type{ uint32_t }
	}
	property{
		name{ cost }
		type{ float }
	}
	property{
		name{ commodity_group }
		type{ uint8_t }
	}
	property{
		name{ is_available_from_start }
		type{ bitfield }
	}
}

object {
	name{ modifier }
	storage_type{ contiguous }
	size{ 1000 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ province_values }
		type{ sys::modifier_definition }
	}
	property{
		name{ national_values }
		type{ sys::modifier_definition }
	}
	property{
		name{ icon }
		type{ uint8_t }
	}
}

object {
	name{ factory_type }
	storage_type{ contiguous }
	size{ 40 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ construction_costs }
		type{array{commodity_id}{float}}
	}
	property{
		name{ construction_time }
		type{int16_t}
	}
	property{
		name{ is_available_from_start }
		type{ bitfield }
	}
}


object {
	name{ ideology_group }
	storage_type{ contiguous }
	size{ 32 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
}

object {
	name{ ideology }
	storage_type{ contiguous }
	size{ 32 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
}

relationship{
	name{ ideology_group_membership }
	
	link{
		object{ideology}
		name{ideology}
		type{unique}
	}
	link{
		object{ideology_group}
		name{ideology_group}
		type{many}
		index_storage{array}
	}
}

object {
	name{ issue }
	storage_type{ contiguous }
	size{ 120 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ options }
		type{ std::array<issue_option_id,culture::max_issue_options> }
	}
	property{
		name{ is_next_step_only }
		type{ bitfield }
	}
	property{
		name{ is_administrative }
		type{ bitfield }
	}
}

object {
	name{ issue_option }
	storage_type{ contiguous }
	size{ 720 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
}

object {
	name{cb_type}
	storage_type{ contiguous }
	size{ 120 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ short_desc }
		type{ text_sequence_id }
	}
	property{
		name{ long_desc }
		type{ text_sequence_id }
	}
	property{
		name{ type_bits }
		type{ uint32_t }
	}
}

object {
	name{leader_trait}
	storage_type{ contiguous }
	size{ 200 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ organisation }
		type{ float }
	}
	property{
		name{ morale }
		type{ float }
	}
	property{
		name{ attack }
		type{ float }
	}
	property{
		name{ defence }
		type{ float }
	}
	property{
		name{ reconnaissance }
		type{ float }
	}
	property{
		name{ speed }
		type{ float }
	}
	property{
		name{ experience }
		type{ float }
	}
	property{
		name{ reliability }
		type{ float }
	}
}

object {
	name{ pop_type}
	storage_type{ contiguous }
	size{ 20 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
}

object {
	name{ rebel_type}
	storage_type{ contiguous }
	size{ 60 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{ description }
		type{ text_sequence_id }
	}
	property{
		name{ army_name }
		type{ text_sequence_id }
	}
}

object {
	name{ province }
	storage_type{ contiguous }
	size{ 8000 }

	property{
		name{ name }
		type{ text_sequence_id }
	}

	property{
		name{ continent }
		type{ modifier_id }
	}

	property{
		name{ climate }
		type{ modifier_id }
	}

	property{
		name{ terrain }
		type{ modifier_id }
	}

	property{
		name{ life_rating }
		type{ uint8_t }
	}

	property{
		name{ rgo }
		type{ commodity_id }
	}

	property{
		name{ fort_naval_base_level }
		type{ uint8_t }
	}

	property{
		name{ railroad_level }
		type{ uint8_t }
	}

	property{
		name{ is_slave }
		type{ bitfield }
	}

	property{
		name{ is_colonial }
		type{ bitfield }
	}

	property{
		name{ party_loyalty }
		type{array{ideology_id}{uint8_t}}
	}
}

object {
	name{ state_definition }
	storage_type{ contiguous }
	size{ 2000 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
}

relationship{
	name{ abstract_state_membership }
	
	link{
		object{province}
		name{province}
		type{unique}
	}
	link{
		object{state_definition}
		name{state}
		type{many}
		index_storage{array}
	}
}

relationship{
	name{ core }
	storage_type{ compactable }
	size{ 16000 }

	link{
		object{province}
		name{province}
		type{many}
		index_storage{array}
	}
	link{
		object{national_identity}
		name{identity}
		type{many}
		index_storage{array}
	}

	composite_key{
		name{prov_tag_key}
		index{province}
		index{identity}
	}
}

relationship{
	name{ identity_holder }

	link{
		object{nation}
		name{nation}
		type{unique}
	}
	link{
		object{national_identity}
		name{identity}
		type{unique}
	}
}

object {
	name{ technology }
	storage_type{ contiguous }
	size{ 200 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{folder_index}
		type{uint8_t}
	}
}

object {
	name{ invention }
	storage_type{ contiguous }
	size{ 600 }

	property{
		name{ name }
		type{ text_sequence_id }
	}
	property{
		name{technology_type}
		type{uint8_t}
	}
}

object {
	name{ nation }
	storage_type{ contiguous }
	size{ 1000 }
}


object {
	name { factory }
	size{ 10000 }

	property{
		name{ building_type }
		type{ factory_type_id }
	}
	property{
		name{ level }
		type{ uint8_t }
	}
}

relationship{
	name{ factory_location }
	
	link{
		object{factory}
		name{factory}
		type{unique}
	}
	link{
		object{province}
		name{province}
		type{many}
		index_storage{array}
	}
}

relationship{
	name{ province_ownership }
	
	link{
		object{province}
		name{province}
		type{unique}
	}
	link{
		object{nation}
		name{nation}
		type{many}
		index_storage{array}
	}
}

relationship{
	name{ province_control }
	
	link{
		object{province}
		name{province}
		type{unique}
	}
	link{
		object{nation}
		name{nation}
		type{many}
		index_storage{array}
	}
}
